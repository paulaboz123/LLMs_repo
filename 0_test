$schema: https://azuremlschemas.azureedge.net/latest/managedOnlineDeployment.schema.json
name: llm
endpoint_name: YOUR_EXISTING_ENDPOINT_NAME

model: null

code_configuration:
  code: .
  scoring_script: score.py

environment: azureml:openai-rag-demand-labeler-env@latest

instance_type: Standard_DS3_v2
instance_count: 1

request_settings:
  request_timeout_ms: 180000
  max_concurrent_requests_per_instance: 1

environment_variables:
  AZURE_OPENAI_ENDPOINT: "https://<twoj-resource>.openai.azure.com/"
  AZURE_OPENAI_API_KEY: "<KEY1_LUB_KEY2_Z_AZURE_PORTAL>"
  AZURE_OPENAI_API_VERSION: "2024-12-01-preview"
  AZURE_OPENAI_CHAT_DEPLOYMENT: "gpt-5-mini"
  AZURE_OPENAI_EMBED_DEPLOYMENT: "text-embedding-3-small"

  TOP_K_RAG: "8"
  MAX_LABELS_PER_CHUNK: "3"
  MIN_KEEP_PROBA: "0.30"
  MAX_TEXT_CHARS: "4000"


if __name__ == "__main__":
    main()

