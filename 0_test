from azure.core.exceptions import HttpResponseError

print("=== Deployment status ===")
dep = ml_client.online_deployments.get(name=NEW_DEPLOYMENT, endpoint_name=ENDPOINT_NAME)
print("name:", dep.name)
print("provisioning_state:", dep.provisioning_state)
print("instance_type:", getattr(dep, "instance_type", None))
print("environment:", getattr(dep, "environment", None))

print("\n=== Container logs (last 400 lines) ===")
try:
    logs = ml_client.online_deployments.get_logs(
        name=NEW_DEPLOYMENT,
        endpoint_name=ENDPOINT_NAME,
        lines=400
    )
    print(logs)
except HttpResponseError as e:
    print("Could not fetch logs:", e)
    raise

################3

import pathlib
print(pathlib.Path(CODE_DIR, "demands.xlsx").resolve(), pathlib.Path(CODE_DIR, "demands.xlsx").exists())

#####
- openpyxl>=3.1.0

#####


endpoint = ml_client.online_endpoints.get(ENDPOINT_NAME)
endpoint.traffic = {NEW_DEPLOYMENT: 10}  # lub 100
ml_client.online_endpoints.begin_create_or_update(endpoint).result()

